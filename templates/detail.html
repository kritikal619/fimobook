<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>선수 상세 정보</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    table { border-collapse: collapse; width: 50%; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f4f4f4; }
    .error { color: red; margin-bottom: 20px; }
    .back { display: inline-block; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>선수 상세 정보</h1>

  {% if error %}
    <div class="error">{{ error }}</div>
    <a href="/" class="back">← 다시 검색하기</a>
  {% elif player %}
    <table>
      <tr><th>클래스</th>      <td>{{ player.className }}</td></tr>
      <tr><th>이름</th>       <td>{{ player.playerKor }} ({{ player.playerEng }})</td></tr>
      <tr><th>팀</th>        <td>{{ player.team }}</td></tr>
      <tr><th>포지션</th>     <td>{{ player.position }}</td></tr>
      <tr><th>OVR</th>       <td>{{ player.ovr }}</td></tr>
      <tr><th>키/몸무게</th>  <td>{{ player.height }}cm / {{ player.weight }}kg</td></tr>
      <tr><th>국적</th>       <td>{{ player.nation }}</td></tr>
      <tr><th>주발</th>       <td>
        {% if player.mainFoot == 1 %}왼발{% elif player.mainFoot == 2 %}오른발{% else %}알 수 없음{% endif %}
      </td></tr>
      <tr><th>왼발 등급</th>   <td>{{ player.footL }}</td></tr>
      <tr><th>오른발 등급</th> <td>{{ player.footR }}</td></tr>
      <tr><th>스킬 부스트</th> <td>{{ player.skillBoostName }} (레벨: {{ player.skillBoostLevel }})</td></tr>
    </table>

    <h2>모든 능력치</h2>
    <table>
      <thead>
        <tr><th>능력치 이름</th><th>수치</th></tr>
      </thead>
      <tbody>
        {% set stat_names = {
             "ACC":"가속","AGG":"공격성","AGI":"민첩성","AWR":"위치 선정","BAC":"볼 컨트롤",
             "BAL":"밸런스","CRO":"크로스","CUR":"감아차기","DRI":"드리블","FIN":"결정력",
             "FRK":"프리킥","GKD":"GK 다이빙","GKK":"GK 킥","GKP":"GK 위치 선정","HAN":"태클",
             "HEA":"헤딩","JMP":"점프","LPA":"롱패스","LSA":"롱슛","MRK":"수비 마킹","PAS":"패스",
             "PEN":"페널티 킥","POS":"포지셔닝","REA":"반응도","REF":"반사 신경","SHO":"슈팅력",
             "SLT":"슬라이딩 태클","SPD":"질주 속도","STA":"체력","STR":"힘","STT":"마크",
             "VIS":"시야","VOL":"볼 컨트롤","WFA":"약발 정확도","LVO":"로빙 발리 정확도","LVOD":"로빙 발리 데미지"
          } %}
        {% for key, value in player.items() %}
          {% if key.isupper() and value is integer %}
            <tr>
              <td>{{ stat_names[key] if key in stat_names else key }}</td>
              <td>{{ value }}</td>
            </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>

    <h2>가격 (진화 등급: 가격)</h2>
    <table>
      <thead>
        <tr><th>진화</th><th>가격</th></tr>
      </thead>
      <tbody>
        {% for i in range(0, 11) %}
          {% set price_key = "n8Price" ~ i %}
          {% if price_key in player %}
            <tr>
              <td>{{ i }}진화</td>
              <td>{{ "{:,}원".format(player[price_key]) }}</td>
            </tr>
          {% endif %}
        {% endfor %}
      </tbody>
    </table>

    {% if player.Trait %}
      <h2>특성</h2>
      <ul>
        {% for t in player.Trait %}
          <li>{{ t.name }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <a href="/" class="back">← 다시 검색하기</a>
  {% endif %}
</body>
</html>
